"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[222],{3222:function(e,t,n){n.r(t),n.d(t,{default:function(){return N}});var r=n(885),a=n(2791),s=n(4166),i=n(5861),o=n(7757),c=n.n(o),u={start_period:0,end_period:0},l={start_period:1,end_period:2},d={start_period:1,end_period:8},f={start_period:1,end_period:31},h={warning_start:"",warning_end:"",period_start:0,period_end:0},p=function(){var e=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Please add url to request");case 2:return e.next=4,fetch("https://api.covid19api.com/"+t);case 4:if((n=e.sent).ok){e.next=9;break}throw new Error("Response status fetch is : ".concat(n.status));case 9:return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=p,v=n(184),j=function(e){var t=e.children,n=e.handleOnChange;return(0,v.jsxs)("select",{name:"countries",id:"countriesList",autoFocus:!0,defaultValue:"default","aria-label":"Default select example",onChange:function(e){return n(e.target.value)},children:[(0,v.jsx)("option",{value:"default",disabled:!0,hidden:!0,children:"Choose a country:"}),t]})},m=function(e){var t=e.data,n=e.setCountry;return(0,v.jsx)(v.Fragment,{children:(0,v.jsx)(j,{handleOnChange:n,children:t.map((function(e,t){var n=e.Country;return n.length>30&&(n=n.slice(0,30)+"..."),(0,v.jsxs)("option",{value:e.Slug,children:[t+1,". ",n]},e.Slug)}))})})},b=function(e){var t=e.callback,n=e.label;return(0,v.jsx)("button",{className:"button",onClick:function(){t&&t()},children:n})},_=function(e){var t=e.name,n=e.date,r=e.maxPeriod,a=e.period,s=e.active,i=e.confirmed,o=e.deaths;return(0,v.jsxs)("div",{children:[(0,v.jsxs)("h2",{children:["Country: ",t]}),!!n&&(0,v.jsxs)("p",{children:["Last statistics day: ",n]}),!!r&&(0,v.jsxs)("p",{children:["All statistical period : ",r]}),!!a&&(0,v.jsxs)("p",{children:["Statistical period : ",a]}),(0,v.jsxs)("p",{children:["Amount of active : ",s]}),(0,v.jsxs)("p",{children:["Amount confirmed : ",i]}),(0,v.jsxs)("p",{children:["Amount of deaths : ",o]})]})},w=function(e){var t=e.label;return(0,v.jsx)("h2",{className:"warning",children:t})},g=function(e){var t=e.label,n=e.memoCallback,s=(0,a.useState)(""),i=(0,r.Z)(s,2),o=i[0],c=i[1];return console.log("val in Input ->",o),(0,a.useEffect)((function(){n(o,t)}),[n,o,t]),(0,v.jsx)("input",{id:t,value:o,type:"date",onChange:function(e){c(e.currentTarget.value)}})},y=function(){return(0,v.jsxs)("div",{className:"d-flex justify-content-center",style:{width:"100%",marginTop:"50px"},children:[(0,v.jsx)("div",{className:"spinner-border",role:"status"}),(0,v.jsx)("span",{children:"Loading..."})]})},S=function(e){var t=e.setCountry,n=(0,a.useState)([]),s=(0,r.Z)(n,2),o=s[0],u=s[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("countries");case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),(0,v.jsx)(v.Fragment,{children:o.length?(0,v.jsxs)("form",{id:"form",className:"covid__countriesList",children:[(0,v.jsx)("label",{form:"countriesList"}),(0,v.jsx)(m,{data:o,setCountry:t})]}):(0,v.jsx)(y,{})})},k=function(e){var t=e.country,n=e.countryData,s=e.setCountryData,o=e.setPeriod,u=e.setShowInputMenu,h=e.setShowStatistics,p=(0,a.useState)(!1),j=(0,r.Z)(p,2),m=j[0],g=j[1];if((0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("country/".concat(t));case 2:n=e.sent,s(n),g(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.length&&(g(!0),e())}),[t,s,g]),m)return(0,v.jsx)(y,{});if(!n.length)return(0,v.jsx)(w,{label:"No information about covid in this country"});var S=n[n.length-1],k=S.Country,C=S.Date.slice(0,10),Z=n.length,D=S.Active,N=S.Confirmed,P=S.Deaths,I=function(e){o(e),h(!0)};return(0,v.jsxs)("div",{className:"covid__countryInfo",children:[(0,v.jsx)(_,{name:k,date:C,maxPeriod:Z,active:D,confirmed:N,deaths:P}),(0,v.jsxs)("a",{href:"#statisticsInfo",children:[(0,v.jsx)(b,{callback:function(){return I(l)},label:"For last day"}),(0,v.jsx)(b,{callback:function(){return I(d)},label:"For last week"}),(0,v.jsx)(b,{callback:function(){return I(f)},label:"For last month"})]}),(0,v.jsx)("a",{href:"#inputMenu",children:(0,v.jsx)(b,{callback:function(){return u(!0)},label:"Input your period"})})]})},C=function(e){var t=e.period,n=e.countryData,r=e.setShowStatistics,a=t.start_period,s=t.end_period;if(!n.length)return null;var i=function(e){return Math.abs(n[n.length-a-1][e]-n[n.length-s-1][e])},o=n[0].Country,c=Math.abs(a-s),u=i("Active"),l=i("Confirmed"),d=i("Deaths");return(0,v.jsxs)("div",{className:"covid__statisticsInfo",id:"statisticsInfo",children:[(0,v.jsx)(_,{name:o,period:c,active:u,confirmed:l,deaths:d}),(0,v.jsx)(b,{callback:function(){return r(!1)},label:"Hidden Statistics"})]})},Z=n(1413);var D=function(e){var t=e.maxPeriod,n=e.setPeriod,s=e.setShowInputMenu,i=e.setShowStatistics,o=(0,a.useState)(h),c=(0,r.Z)(o,2),u=c[0],l=c[1];console.log("results",u);var d=(0,a.useCallback)((function(e,n){l((function(r){return(0,Z.Z)((0,Z.Z)({},r),function(e,t,n){var r={},a=new Date,s=new Date(e),i=Math.ceil((a-s)/864e5);return i<1||i>n?(r["warning_"+t]="Wrong period ".concat(t,"."),r["period_"+t]=0):(r["warning_"+t]="",r["period_"+t]=i),r}(e,n,t))}))}),[t,l]);return(0,a.useEffect)((function(){u.period_start&&u.period_end?(n({start_period:u.period_start,end_period:u.period_end}),i(!0)):i(!1)}),[u.period_start,u.period_end,n,i]),(0,v.jsxs)("div",{className:"covid__inputMenu",id:"inputMenu",children:[(0,v.jsxs)("h4",{children:["Period must be limited no more ",t," days ago to last statistics day."]}),(0,v.jsx)("label",{name:"start_period",children:"Enter periods start"}),(0,v.jsx)(g,{label:"start",memoCallback:d}),(0,v.jsx)("label",{name:"end_period",children:"Enter periods end"}),(0,v.jsx)(g,{label:"end",memoCallback:d}),(0,v.jsx)(b,{label:"Hidden input menu",callback:function(){return s(!1)}}),u.warning_start?(0,v.jsx)(w,{label:u.warning_start}):null,u.warning_end?(0,v.jsx)(w,{label:u.warning_end}):null]})},N=function(){var e=(0,a.useState)(""),t=(0,r.Z)(e,2),n=t[0],i=t[1],o=(0,a.useState)([]),c=(0,r.Z)(o,2),l=c[0],d=c[1],f=(0,a.useState)(u),h=(0,r.Z)(f,2),p=h[0],x=h[1];console.log("period",p);var j=(0,a.useState)(!1),m=(0,r.Z)(j,2),b=m[0],_=m[1],w=(0,a.useState)(!1),g=(0,r.Z)(w,2),y=g[0],Z=g[1];return(0,v.jsxs)("div",{className:"covid",children:[(0,v.jsx)(s.e,{}),(0,v.jsxs)("main",{className:"covid",children:[(0,v.jsx)(S,{setCountry:i}),(0,v.jsxs)("div",{className:"covid__wrapBlocks",children:[b&&(0,v.jsx)(D,{maxPeriod:l.length,setPeriod:x,setShowInputMenu:_,setShowStatistics:Z}),!!n.length&&(0,v.jsx)(k,{country:n,countryData:l,setCountryData:d,setPeriod:x,setShowInputMenu:_,setShowStatistics:Z}),y&&(0,v.jsx)(C,{period:p,countryData:l,setShowStatistics:Z})]})]})]})}},4166:function(e,t,n){n.d(t,{e:function(){return i}});var r=n(3504),a=n(3360),s=n(184),i=function(){return(0,s.jsx)(r.rU,{to:"/portfolio",children:(0,s.jsx)(a.Z,{variant:"secondary",style:{boxShadow:"10px 10px 10px rgb(100, 100, 100)"},children:"Back"})})}},5861:function(e,t,n){function r(e,t,n,r,a,s,i){try{var o=e[s](i),c=o.value}catch(u){return void n(u)}o.done?t(c):Promise.resolve(c).then(r,a)}function a(e){return function(){var t=this,n=arguments;return new Promise((function(a,s){var i=e.apply(t,n);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)}))}}n.d(t,{Z:function(){return a}})}}]);
//# sourceMappingURL=222.44e0f735.chunk.js.map