"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[265],{8265:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});var n=r(885),i=r(2791),a=r(3504),s=r(1652),o=r(3666),c=r(3360),l=r(7839),u=r(1540),d=r(5861),v=r(7757),f=r.n(v);function h(){return(h=(0,d.Z)(f().mark((function e(t){var r;return f().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),t){e.next=3;break}throw new Error("Wrong url in request");case 3:return e.next=5,fetch(t);case 5:if(204!==(r=e.sent).status){e.next=9;break}return console.log("response.status === 204 (No content)"),e.abrupt("return");case 9:if(r.ok){e.next=13;break}throw new Error("Error. Response status  fetch is: ".concat(r.status));case 13:return e.next=15,r.json();case 15:return e.abrupt("return",e.sent);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var x=function(e){return h.apply(this,arguments)},m="https://image.tmdb.org/t/p/w500",g=[{val:"original_title",name:"Original title"},{val:"release_date",name:"Release date"},{val:"vote_average",name:"Vote average"},{val:"vote_count",name:"Vote count"}],p=function(e,t,r){var n="";console.log("getMovies fire, genres are ->",e),e.length?(n="".concat("https://api.themoviedb.org/3","/discover/movie?api_key=").concat("29b19dec74f080a60c50986cda85b141").concat("&language=en-US&sort_by=popularity.desc&include_adult=false&include_video=true&page=1","&with_genres=").concat(e.join()),r(!0),x(n).then((function(e){console.log("in getMovies---\x3e",e.results),t(e.results),r(!1)})).catch((function(e){return console.log("ups!!!",e)}))):t([])},_=r(2982),j=function(e,t,r,n){n?(e.length||t([r]),e.some((function(e){return e===r}))||t([].concat((0,_.Z)(e),[r]))):n||t(e.filter((function(e){return e!==r})))},Z=r(184),F=function(e){var t=e.setFilmsData,r=e.keyWordSort,d=e.setKeyWordSort,v=e.setShowFavoriteList,f=e.showFavoriteList,h=e.favoriteList,x=e.setIsLoading,m=(0,i.useState)([]),_=(0,n.Z)(m,2),F=_[0],b=_[1];return(0,Z.jsxs)(s.Z,{variant:"dark",bg:"dark",expand:"lg",fixed:"top",children:[(0,Z.jsx)(s.Z.Brand,{children:"FilmsTime"}),(0,Z.jsx)(s.Z.Toggle,{"aria-controls":"navbar-dark-example"}),(0,Z.jsx)(s.Z.Collapse,{id:"navbar-dark-example",children:(0,Z.jsxs)(o.Z,{children:[(0,Z.jsx)(u.V9,{getGenre:function(e,t){j(F,b,e,t)}}),(0,Z.jsx)(c.Z,{variant:"primary",onClick:function(){return p(F,t,x)},children:"Click to load"}),(0,Z.jsx)(u.pw,{options:g,defaultName:"Sort",value:r,setKeyWordSort:d}),(0,Z.jsx)(l.Z,{id:"toggle-check",type:"checkbox",variant:"outline-success",checked:f,value:"",onChange:function(e){return v(e.currentTarget.checked)},children:"My favoriteList"}),(0,Z.jsx)(u.AT,{favoriteList:h}),(0,Z.jsx)(o.Z.Item,{children:(0,Z.jsx)(o.Z.Link,{children:(0,Z.jsx)(a.rU,{to:"/portfolio",children:"BACK"})})})]})})]})},b=r(9743),k=r(9140),y="FavoriteList_card_marg__CKRnp",L="FavoriteList_no_films__bIXZO",C="FavoriteList_card_btn_delFilm__+MGQc",w=function(e){var t=e.favoriteList,r=e.setFavoriteList;if(!t.length)return(0,Z.jsxs)("div",{className:L,children:[(0,Z.jsx)("h1",{children:"You haven't selected films."}),(0,Z.jsx)("h4",{children:"Please ENTER My favoriteList to esc"})]});return(0,Z.jsx)(b.Z,{id:"home",style:{marginTop:"20px",justifyContent:"center",paddingTop:"50px",backgroundColor:"#F8FFAF"},children:t.map((function(e){return(0,Z.jsxs)(k.Z,{style:{width:"20rem"},bg:"success ".concat(y),children:[(0,Z.jsx)(k.Z.Img,{variant:"top",src:"".concat(m).concat(e.poster_path)}),(0,Z.jsxs)(k.Z.Body,{children:[(0,Z.jsx)(k.Z.Title,{children:e.title}),(0,Z.jsxs)(k.Z.Subtitle,{className:"mb-2",children:["Vote average ",e.vote_average]}),(0,Z.jsxs)(k.Z.Subtitle,{children:["Counts ",e.vote_count]}),(0,Z.jsx)("br",{}),(0,Z.jsxs)(k.Z.Subtitle,{children:["Release date ",e.release_date]}),(0,Z.jsx)("br",{}),(0,Z.jsx)(k.Z.Text,{id:"cardText_".concat(e.id),children:e.overview}),(0,Z.jsx)(c.Z,{className:C,variant:"danger",value:e.id,onClick:function(e){var n;n=e.currentTarget.value,r(t.filter((function(e){return"".concat(e.id)!==n})))},children:"Delete from favoriteList"})]})]},"MyList".concat(e.id))}))})},S=r(473),T="Film_cardBody__FUyl8",N="Film_filmCard__eyQPa",W="Film_filmCard__expanded__8ogW-",I="Film_cardButtonsRow__WKxw9",R="Film_card_btn_remove__d1JdV",D=function(e){var t=e.film,r=e.isInFavorites,a=e.addToFavoriteList,s=e.deleteFromFavoriteList,o=t.id,l=t.title,u=t.poster_path,d=t.overview,v=t.vote_count,f=t.vote_average,h=t.release_date,x=(0,i.useState)(!1),g=(0,n.Z)(x,2),p=g[0],_=g[1];return(0,Z.jsxs)(k.Z,{style:{width:"20rem"},bg:"".concat(r?"success":"primary"),className:"".concat(N," ").concat(p&&W),children:[(0,Z.jsx)(k.Z.Img,{variant:"top",src:"".concat(m).concat(u)}),(0,Z.jsxs)(k.Z.Body,{className:T,children:[(0,Z.jsx)(k.Z.Title,{children:l}),(0,Z.jsxs)(k.Z.Subtitle,{className:"mb-2",children:["Vote average ",f,(0,Z.jsx)("br",{}),"Counts ",v,(0,Z.jsx)("br",{}),"Release date ",h,(0,Z.jsx)("br",{})]}),p&&(0,Z.jsx)(k.Z.Text,{children:d}),(0,Z.jsxs)("div",{className:I,children:[(0,Z.jsx)(c.Z,{variant:"dark",onClick:function(){_((function(e){return!e}))},children:p?"Collapse":"Expand"}),(0,Z.jsx)(c.Z,{variant:"success",onClick:function(){a(o)},children:"Add to favorite"}),r&&(0,Z.jsx)(S.Z,{className:R,style:{border:"3px solid red"},variant:"white",onClick:function(){return s(o)}})]})]})]})},E=function(e,t,r){e.length&&t.length&&t.every((function(t){return"string"===typeof t[e]||"number"}))&&r((0,_.Z)(t).sort((function(t,r){return"original_title"===e?t[e]>r[e]?1:-1:t[e]<r[e]?1:-1})))},B="FilmsList_center__olC8R",K=function(e){var t=e.filmsData,r=e.setFilmsData,n=e.favoriteList,a=e.setFavoriteList,s=e.keyWordSort,o=e.isLoading;(0,i.useEffect)((function(){o||(E(s,t,r),E(s,n,a))}),[s,o]);var c=(0,i.useCallback)((function(e){a((function(t){return t.filter((function(t){return t.id!==e}))}))}),[a]),l=(0,i.useCallback)((function(e){var r=t.filter((function(t){return t.id===e}));n.length||a(r),n.every((function(t){return t.id!==e}))&&a([].concat((0,_.Z)(n),(0,_.Z)(r)))}),[t,n,a]);return t.length?(0,Z.jsx)(b.Z,{id:"home",style:{justifyContent:"center",marginTop:"20px",paddingTop:"50px",backgroundColor:"#F8FFAF"},children:t.map((function(e){var t=!!n.filter((function(t){return t.id===e.id})).length;return(0,Z.jsx)(D,{film:e,isInFavorites:t,deleteFromFavoriteList:c,addToFavoriteList:l},e.id)}))}):(0,Z.jsx)("h3",{className:B,children:"Please, choose genres"})};var M=function(){var e=(0,i.useState)(!1),t=(0,n.Z)(e,2),r=t[0],a=t[1],s=(0,i.useState)(""),o=(0,n.Z)(s,2),c=o[0],l=o[1],d=(0,i.useState)([]),v=(0,n.Z)(d,2),f=v[0],h=v[1],x=(0,i.useState)([]),m=(0,n.Z)(x,2),g=m[0],p=m[1],_=(0,i.useState)(!1),j=(0,n.Z)(_,2),b=j[0],k=j[1];return console.log(),(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(F,{setFilmsData:h,setIsLoading:a,keyWordSort:c,setKeyWordSort:l,setShowFavoriteList:k,showFavoriteList:b,favoriteList:g}),r?(0,Z.jsx)(u.aN,{}):b?(0,Z.jsx)(w,{favoriteList:g,setFavoriteList:p}):(0,Z.jsx)(K,{filmsData:f,setFilmsData:h,favoriteList:g,setFavoriteList:p,keyWordSort:c,isLoading:r})]})}}}]);
//# sourceMappingURL=265.fd287ce4.chunk.js.map