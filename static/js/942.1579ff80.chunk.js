"use strict";(self.webpackChunkportfolio=self.webpackChunkportfolio||[]).push([[942],{6942:function(e,t,n){n.r(t),n.d(t,{default:function(){return I}});var r=n(885),a=n(2791),s=n(3504),i=n(5861),o=n(7757),c=n.n(o),u={start_period:0,end_period:0},l={start_period:1,end_period:2},d={start_period:1,end_period:8},f={start_period:1,end_period:31},h={warning_start:"",warning_end:"",period_start:0,period_end:0},p=function(){var e=(0,i.Z)(c().mark((function e(t){var n,r;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("Please add url to request");case 2:return e.next=4,fetch("https://api.covid19api.com/"+t);case 4:if((n=e.sent).ok){e.next=9;break}throw new Error("Response status fetch is : ".concat(n.status));case 9:return e.next=11,n.json();case 11:return r=e.sent,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=p,j=n(184),m=function(e){var t=e.children,n=e.handleOnChange;return(0,j.jsxs)("select",{name:"countries",id:"countriesList",autoFocus:!0,defaultValue:"default",className:"countriesList","aria-label":"Default select example",onChange:function(e){return n(e.target.value)},children:[(0,j.jsx)("option",{value:"default",disabled:!0,hidden:!0,children:"Choose a country:"}),t]})},v=function(e){var t=e.data,n=e.setCountry;return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(m,{handleOnChange:n,children:t.map((function(e,t){return(0,j.jsxs)("option",{value:e.Slug,children:[t+1,". ",e.Country]},e.Slug)}))})})},b=function(e){var t=e.callback,n=e.label;return(0,j.jsx)("button",{className:"button",onClick:function(){t&&t()},children:n})},g=function(e){var t=e.name,n=e.date,r=e.maxPeriod,a=e.period,s=e.active,i=e.confirmed,o=e.deaths;return(0,j.jsxs)("div",{children:[(0,j.jsxs)("h2",{children:["Country: ",t]}),!!n&&(0,j.jsxs)("p",{children:["Last statistics day: ",n]}),!!r&&(0,j.jsxs)("p",{children:["All statistical period : ",r]}),!!a&&(0,j.jsxs)("p",{children:["Statistical period : ",a]}),(0,j.jsxs)("p",{children:["Amount of active : ",s]}),(0,j.jsxs)("p",{children:["Amount confirmed : ",i]}),(0,j.jsxs)("p",{children:["Amount of deaths : ",o]})]})},w=function(e){var t=e.label;return(0,j.jsx)("h2",{className:"warning",children:t})},_=function(e){var t=e.label,n=e.memoCallback,s=(0,a.useState)(""),i=(0,r.Z)(s,2),o=i[0],c=i[1];return console.log("val in Input ->",o),(0,a.useEffect)((function(){n(o,t)}),[n,o,t]),(0,j.jsx)("input",{id:t,value:o,type:"date",onChange:function(e){c(e.currentTarget.value)}})},y=function(){return(0,j.jsxs)("div",{className:"d-flex justify-content-center",style:{width:"100%",marginTop:"50px"},children:[(0,j.jsx)("div",{className:"spinner-border",role:"status"}),(0,j.jsx)("span",{children:"Loading..."})]})},S=function(e){var t=e.setCountry,n=(0,a.useState)([]),s=(0,r.Z)(n,2),o=s[0],u=s[1];return(0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)(c().mark((function e(){var t;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("countries");case 2:t=e.sent,u(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),o.length?(0,j.jsx)("header",{children:(0,j.jsx)("nav",{children:(0,j.jsxs)("form",{id:"form",children:[(0,j.jsx)("label",{form:"countriesList"}),(0,j.jsx)(v,{data:o,setCountry:t})]})})}):(0,j.jsx)(y,{})},C=function(e){var t=e.country,n=e.countryData,s=e.setCountryData,o=e.setPeriod,u=e.setShowInputMenu,h=e.setShowStatistics,p=(0,a.useState)(!1),m=(0,r.Z)(p,2),v=m[0],_=m[1];if((0,a.useEffect)((function(){var e=function(){var e=(0,i.Z)(c().mark((function e(){var n;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x("country/".concat(t));case 2:n=e.sent,s(n),_(!1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();t.length&&(_(!0),e())}),[t,s,_]),v)return(0,j.jsx)(y,{});if(!n.length)return(0,j.jsx)(w,{label:"No information about covid in this country"});var S=n[n.length-1],C=S.Country,k=S.Date.slice(0,10),Z=n.length,D=S.Active,I=S.Confirmed,M=S.Deaths,N=function(e){o(e),h(!0)};return(0,j.jsxs)("div",{className:"countryInfo",children:[(0,j.jsx)(g,{name:C,date:k,maxPeriod:Z,active:D,confirmed:I,deaths:M}),(0,j.jsxs)("a",{href:"#statisticsInfo",children:[(0,j.jsx)(b,{callback:function(){return N(l)},label:"For last day"}),(0,j.jsx)(b,{callback:function(){return N(d)},label:"For last week"}),(0,j.jsx)(b,{callback:function(){return N(f)},label:"For last month"})]}),(0,j.jsx)("a",{href:"#inputMenu",children:(0,j.jsx)(b,{callback:function(){return u(!0)},label:"Input your period"})})]})},k=function(e){var t=e.period,n=e.countryData,r=e.setShowStatistics,a=t.start_period,s=t.end_period;if(n.length){var i=function(e){return Math.abs(n[n.length-a-1][e]-n[n.length-s-1][e])},o=n[0].Country,c=Math.abs(a-s),u=i("Active"),l=i("Confirmed"),d=i("Deaths");return(0,j.jsxs)("div",{className:"statisticsInfo",id:"statisticsInfo",children:[(0,j.jsx)(g,{name:o,period:c,active:u,confirmed:l,deaths:d}),(0,j.jsx)(b,{callback:function(){return r(!1)},label:"Hidden Statistics"})]})}},Z=n(1413);var D=function(e){var t=e.maxPeriod,n=e.setPeriod,s=e.setShowInputMenu,i=e.setShowStatistics,o=(0,a.useState)(h),c=(0,r.Z)(o,2),u=c[0],l=c[1];console.log("results",u);var d=(0,a.useCallback)((function(e,n){l((function(r){return(0,Z.Z)((0,Z.Z)({},r),function(e,t,n){var r={},a=new Date,s=new Date(e),i=Math.ceil((a-s)/864e5);return i<1||i>n?(r["warning_"+t]="Wrong period ".concat(t,"."),r["period_"+t]=0):(r["warning_"+t]="",r["period_"+t]=i),r}(e,n,t))}))}),[t,l]);return(0,a.useEffect)((function(){u.period_start&&u.period_end?(n({start_period:u.period_start,end_period:u.period_end}),i(!0)):i(!1)}),[u.period_start,u.period_end,n,i]),(0,j.jsxs)("div",{className:"inputMenu",id:"inputMenu",children:[(0,j.jsxs)("h4",{children:["Period must be limited no more ",t," days ago to last statistics day."]}),(0,j.jsx)("label",{name:"start_period",children:"Enter periods start"}),(0,j.jsx)(_,{label:"start",memoCallback:d}),(0,j.jsx)("label",{name:"end_period",children:"Enter periods end"}),(0,j.jsx)(_,{label:"end",memoCallback:d}),(0,j.jsx)(b,{label:"Hidden input menu",callback:function(){return s(!1)}}),u.warning_start?(0,j.jsx)(w,{label:u.warning_start}):null,u.warning_end?(0,j.jsx)(w,{label:u.warning_end}):null]})},I=function(){var e=(0,a.useState)(""),t=(0,r.Z)(e,2),n=t[0],i=t[1],o=(0,a.useState)([]),c=(0,r.Z)(o,2),l=c[0],d=c[1],f=(0,a.useState)(u),h=(0,r.Z)(f,2),p=h[0],x=h[1];console.log("period",p);var m=(0,a.useState)(!1),v=(0,r.Z)(m,2),b=v[0],g=v[1],w=(0,a.useState)(!1),_=(0,r.Z)(w,2),y=_[0],Z=_[1];return(0,j.jsxs)(j.Fragment,{children:[(0,j.jsx)(s.rU,{to:"/portfolio",children:"<-- BACK"}),(0,j.jsx)(S,{setCountry:i}),(0,j.jsxs)("main",{className:"content",children:[b&&(0,j.jsx)(D,{maxPeriod:l.length,setPeriod:x,setShowInputMenu:g,setShowStatistics:Z}),!!n.length&&(0,j.jsx)(C,{country:n,countryData:l,setCountryData:d,setPeriod:x,setShowInputMenu:g,setShowStatistics:Z}),y&&(0,j.jsx)(k,{period:p,countryData:l,setShowStatistics:Z})]})]})}}}]);
//# sourceMappingURL=942.1579ff80.chunk.js.map